{"ast":null,"code":"import { AUTH_SUCCESS, ERROR_MSG } from './action-types';\nimport { reqRegister, reqLogin } from '../api/index'; // import { Redirect } from 'react-router-dom'\n//授权成功的同步action\n\nconst authSuccess = (user, msg) => ({\n  type: AUTH_SUCCESS,\n  data: {\n    user,\n    msg\n  }\n}); //错误提示信息的同步action\n\n\nconst errorMsg = msg => ({\n  type: ERROR_MSG,\n  data: msg\n}); // 注册异步action\n\n\nexport const register = user => {\n  const {\n    username,\n    password\n  } = user;\n  return async dispatch => {\n    const response = await reqRegister({\n      username,\n      password\n    });\n    const result = response.data;\n\n    if (result.code === 0) {\n      // console.log(result);\n      dispatch(authSuccess(result.data, result.data.msg));\n      window.location.reload(); //整个页面刷新\n      // <Redirect to='/login'/>\n    } else {\n      dispatch(errorMsg(result.msg));\n    }\n  };\n}; // 登录异步action、\n\nexport const login = user => {\n  const {\n    username,\n    password\n  } = user;\n  console.log(user);\n  return async dispatch => {\n    const response = await reqLogin({\n      username,\n      password\n    });\n    const result = response.data; // console.log(result);\n\n    if (result.code === 0) {\n      dispatch(authSuccess(result.data, result.msg)); // window.location.reload() //整个页面刷新\n    } else {\n      dispatch(errorMsg(result.msg));\n    }\n  };\n};","map":{"version":3,"sources":["E:/web  --/项目二/mac-desktop-client/src/redux/actions.js"],"names":["AUTH_SUCCESS","ERROR_MSG","reqRegister","reqLogin","authSuccess","user","msg","type","data","errorMsg","register","username","password","dispatch","response","result","code","window","location","reload","login","console","log"],"mappings":"AAAA,SACIA,YADJ,EAEIC,SAFJ,QAIO,gBAJP;AAMA,SACIC,WADJ,EAEIC,QAFJ,QAGM,cAHN,C,CAIA;AAEA;;AACA,MAAMC,WAAW,GAAG,CAACC,IAAD,EAAMC,GAAN,MAAe;AAACC,EAAAA,IAAI,EAACP,YAAN;AAAmBQ,EAAAA,IAAI,EAAC;AAACH,IAAAA,IAAD;AAAMC,IAAAA;AAAN;AAAxB,CAAf,CAApB,C,CACA;;;AACA,MAAMG,QAAQ,GAAIH,GAAD,KAAU;AAACC,EAAAA,IAAI,EAACN,SAAN;AAAgBO,EAAAA,IAAI,EAACF;AAArB,CAAV,CAAjB,C,CAIA;;;AACA,OAAO,MAAMI,QAAQ,GAAIL,IAAD,IAAU;AAC9B,QAAM;AAAEM,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAyBP,IAA/B;AAEA,SAAO,MAAMQ,QAAN,IAAkB;AACrB,UAAMC,QAAQ,GAAG,MAAMZ,WAAW,CAAC;AAAES,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAD,CAAlC;AACA,UAAMG,MAAM,GAAGD,QAAQ,CAACN,IAAxB;;AAEA,QAAIO,MAAM,CAACC,IAAP,KAAgB,CAApB,EAAuB;AACnB;AACAH,MAAAA,QAAQ,CAACT,WAAW,CAACW,MAAM,CAACP,IAAR,EAAcO,MAAM,CAACP,IAAP,CAAYF,GAA1B,CAAZ,CAAR;AAEAW,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAJmB,CAIM;AACzB;AACH,KAND,MAOK;AACDN,MAAAA,QAAQ,CAACJ,QAAQ,CAACM,MAAM,CAACT,GAAR,CAAT,CAAR;AACH;AACJ,GAdD;AAeH,CAlBM,C,CAoBP;;AACA,OAAO,MAAMc,KAAK,GAAIf,IAAD,IAAU;AAC3B,QAAM;AAAEM,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAyBP,IAA/B;AACAgB,EAAAA,OAAO,CAACC,GAAR,CAAYjB,IAAZ;AAEA,SAAO,MAAMQ,QAAN,IAAkB;AACrB,UAAMC,QAAQ,GAAG,MAAMX,QAAQ,CAAC;AAAEQ,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAD,CAA/B;AACA,UAAMG,MAAM,GAAGD,QAAQ,CAACN,IAAxB,CAFqB,CAIrB;;AACA,QAAIO,MAAM,CAACC,IAAP,KAAgB,CAApB,EAAuB;AACnBH,MAAAA,QAAQ,CAACT,WAAW,CAACW,MAAM,CAACP,IAAR,EAAcO,MAAM,CAACT,GAArB,CAAZ,CAAR,CADmB,CAEnB;AACH,KAHD,MAIK;AACDO,MAAAA,QAAQ,CAACJ,QAAQ,CAACM,MAAM,CAACT,GAAR,CAAT,CAAR;AACH;AACJ,GAZD;AAaH,CAjBM","sourcesContent":["import {\r\n    AUTH_SUCCESS,\r\n    ERROR_MSG,\r\n \r\n} from './action-types'\r\n\r\nimport {\r\n    reqRegister,\r\n    reqLogin,\r\n}from '../api/index'\r\n// import { Redirect } from 'react-router-dom'\r\n\r\n//授权成功的同步action\r\nconst authSuccess = (user,msg) => ({type:AUTH_SUCCESS,data:{user,msg}})\r\n//错误提示信息的同步action\r\nconst errorMsg = (msg) => ({type:ERROR_MSG,data:msg})\r\n\r\n\r\n\r\n// 注册异步action\r\nexport const register = (user) => {\r\n    const { username, password } = user\r\n    \r\n    return async dispatch => {\r\n        const response = await reqRegister({ username, password })\r\n        const result = response.data\r\n       \r\n        if (result.code === 0) {\r\n            // console.log(result);\r\n            dispatch(authSuccess(result.data, result.data.msg))\r\n\r\n            window.location.reload() //整个页面刷新\r\n            // <Redirect to='/login'/>\r\n        }\r\n        else {\r\n            dispatch(errorMsg(result.msg))\r\n        }\r\n    }\r\n}\r\n\r\n// 登录异步action、\r\nexport const login = (user) => {\r\n    const { username, password } = user\r\n    console.log(user);\r\n    \r\n    return async dispatch => {\r\n        const response = await reqLogin({ username, password })\r\n        const result = response.data\r\n\r\n        // console.log(result);\r\n        if (result.code === 0) {\r\n            dispatch(authSuccess(result.data, result.msg))\r\n            // window.location.reload() //整个页面刷新\r\n        }\r\n        else {\r\n            dispatch(errorMsg(result.msg))\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}